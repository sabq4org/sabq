# ๐ฏ ุงูุญู ุงูููุงุฆู - ูุดููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ุงููุดููุฉ ุงููุญุฏุฏุฉ
```
GET /api/categories 500 (Internal Server Error)
ุงูุฎุทุฃ: "the URL must start with the protocol `prisma://` or `prisma+postgres://`"
```

## ๐ก ุงูุณุจุจ
ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญุงูู ุตุญูุญ ููู ูุญุชุงุฌ **ุฅุถุงูุฉ parameters** ุฅุถุงููุฉ ููุชูุงูู ูุน Prisma ุนูู Vercel.

## ๐ ุงูุญู ุงูููุงุฆู (ุฏูููุชุงู)

### ุงูุฎุทูุฉ ุงููุญูุฏุฉ ุงููุทููุจุฉ:

1. **ุงุฐูุจ ุฅูู**: https://vercel.com/dashboard
2. **ุงุฎุชุฑ ูุดุฑูุน**: `sabq-ai-cms`
3. **Settings** > **Environment Variables**
4. **ุงุจุญุซ ุนู**: `DATABASE_URL`
5. **ุงููุฑ**: **Edit** 
6. **ุฃุถู ูุฐู Parameters** ูู ููุงูุฉ ุงูุฑุงุจุท ุงูุญุงูู:
   ```
   &connect_timeout=60&pool_timeout=60
   ```

### ูุซุงู:
**ูู:**
```
mysql://username:password@aws.connect.psdb.cloud/j3uar_sabq_ai?sslaccept=strict
```

**ุฅูู:**
```
mysql://username:password@aws.connect.psdb.cloud/j3uar_sabq_ai?sslaccept=strict&connect_timeout=60&pool_timeout=60
```

### ุฎุทูุฉ ุฅุถุงููุฉ (ุงุฎุชูุงุฑูุฉ):
7. **ุฃุถู ูุชุบูุฑ ุฌุฏูุฏ**:
   - **Name**: `DIRECT_URL`
   - **Value**: ููุณ ูููุฉ `DATABASE_URL` ุงูุฌุฏูุฏุฉ
   - **Environment**: Production

8. **ุงุญูุธ** ุงูุชุบููุฑุงุช
9. **ุงุฐูุจ ุฅูู Deployments** > **Redeploy**

## ๐งช ุงุฎุชุจุงุฑ ุงููุชูุฌุฉ
ุจุนุฏ 2-3 ุฏูุงุฆู ูู ุฅุนุงุฏุฉ ุงููุดุฑ:

1. **ุงูุชุญ**: https://sabq-ai-cms.vercel.app/api/test-db
   - **ูุชููุน**: `"success": true`

2. **ุงูุชุญ**: https://sabq-ai-cms.vercel.app/api/categories
   - **ูุชููุน**: ูุงุฆูุฉ ุงููุฆุงุช ุจุฏูุงู ูู error 500

3. **ุฃู ุดุบู**: `node scripts/test-fix.js`

## ๐ ุงููุชูุฌุฉ ุงููุชููุนุฉ
- โ ุฌููุน API endpoints ุชุนูู
- โ ููุญุฉ ุงูุชุญูู ุชุนูู ุจุฏูู ุฃุฎุทุงุก
- โ ุฅุถุงูุฉ/ุชุนุฏูู ุงูููุงูุงุช ูุงููุฆุงุช
- โ ุฑูุน ุงูุตูุฑ ูุน Cloudinary

## ๐ง ุฅุฐุง ูู ูุนูู ุงูุญู
ุฌุฑุจ ูุฐู ุงูุจุฏุงุฆู:

### ุงูุจุฏูู 1: SSL mode ูุฎุชูู
```
&ssl_mode=REQUIRED&connect_timeout=60
```

### ุงูุจุฏูู 2: ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ
1. Vercel Dashboard > Storage > Create Database
2. ุงุฎุชุฑ **Postgres** (ุฃูุซุฑ ุงุณุชูุฑุงุฑุงู)
3. ุงุณุชุฎุฏู `DATABASE_URL=$POSTGRES_PRISMA_URL`

### ุงูุจุฏูู 3: ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ
1. ุงุฐูุจ ุฅูู PlanetScale Dashboard
2. ุฃูุดุฆ password ุฌุฏูุฏ
3. ุญุฏุซ `DATABASE_URL` ูู Vercel

---

## ๐ ูุนูููุงุช ุฅุถุงููุฉ

**ุงููููุงุช ุงููุญุฏุซุฉ**: 40+ ููู ููุชูุงูู ูุน Vercel
**ุงูุฃุฏูุงุช ุงููุชุงุญุฉ**: 
- `scripts/test-fix.js` - ุงุฎุชุจุงุฑ ุงูุญุงูุฉ
- `APPLY_FIX_MANUAL.md` - ุฏููู ููุตู
- `/api/test-db` - ุชุดุฎูุต ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงููุดุฑูุน ุฌุงูุฒ 100% - ููุท ุทุจู ุงูุฎุทูุฉ ุงููุงุญุฏุฉ ุฃุนูุงู!** ๐ฏ 