#!/bin/bash

echo "๐ง ุฅุตูุงุญ ูุดุงูู ุงูููุชุฏู ูู ููุญุฉ ุงูุชุญูู"
echo "====================================="
echo ""

# ุงูุชุญูู ูู ูุฌูุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
echo "๐ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช..."
if ! mysql -u root -p -e "USE sabq_cms;" 2>/dev/null; then
    echo "โ ูุง ูููู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช"
    echo "ุชุฃูุฏ ูู ุชุดุบูู MySQL ูุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู"
    exit 1
fi

echo "โ ุชู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ"
echo ""

# ุฅูุดุงุก ุฌุฏูู ุฅุนุฏุงุฏุงุช ุงูููุชุฏู
echo "โ๏ธ ุฅูุดุงุก ุฌุฏูู ุฅุนุฏุงุฏุงุช ุงูููุชุฏู..."
mysql -u root -p sabq_cms < scripts/create-forum-settings-table.sql

if [ $? -eq 0 ]; then
    echo "โ ุชู ุฅูุดุงุก ุฌุฏูู ุฅุนุฏุงุฏุงุช ุงูููุชุฏู ุจูุฌุงุญ"
else
    echo "โ ูุดู ูู ุฅูุดุงุก ุฌุฏูู ุงูุฅุนุฏุงุฏุงุช"
    exit 1
fi

echo ""

# ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู
echo "๐ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู..."
pkill -f "next dev" || true
sleep 2

echo "โ ุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู"
echo ""

# ุงุฎุชุจุงุฑ APIs
echo "๐งช ุงุฎุชุจุงุฑ APIs ุงูููุชุฏู..."

# ุงุฎุชุจุงุฑ API ุงูุฅุญุตุงุฆูุงุช
echo "๐ ุงุฎุชุจุงุฑ API ุงูุฅุญุตุงุฆูุงุช..."
curl -s http://localhost:3000/api/forum/stats > /dev/null
if [ $? -eq 0 ]; then
    echo "โ API ุงูุฅุญุตุงุฆูุงุช ูุนูู ุจูุฌุงุญ"
else
    echo "โ ูุดููุฉ ูู API ุงูุฅุญุตุงุฆูุงุช"
fi

# ุงุฎุชุจุงุฑ API ุงูุฅุนุฏุงุฏุงุช
echo "โ๏ธ ุงุฎุชุจุงุฑ API ุงูุฅุนุฏุงุฏุงุช..."
curl -s http://localhost:3000/api/forum/settings > /dev/null
if [ $? -eq 0 ]; then
    echo "โ API ุงูุฅุนุฏุงุฏุงุช ูุนูู ุจูุฌุงุญ"
else
    echo "โ ูุดููุฉ ูู API ุงูุฅุนุฏุงุฏุงุช"
fi

# ุงุฎุชุจุงุฑ API ุงููุฆุงุช
echo "๐ ุงุฎุชุจุงุฑ API ุงููุฆุงุช..."
curl -s http://localhost:3000/api/forum/categories > /dev/null
if [ $? -eq 0 ]; then
    echo "โ API ุงููุฆุงุช ูุนูู ุจูุฌุงุญ"
else
    echo "โ ูุดููุฉ ูู API ุงููุฆุงุช"
fi

echo ""
echo "๐ ุชู ุฅุตูุงุญ ูุดุงูู ุงูููุชุฏู ุจูุฌุงุญ!"
echo ""
echo "๐ ููุฎุต ุงูุฅุตูุงุญุงุช:"
echo "โ ุชู ุฅูุดุงุก API ุงูุฅุญุตุงุฆูุงุช ุงูุญููููุฉ"
echo "โ ุชู ุฅูุดุงุก API ุฅุนุฏุงุฏุงุช ุงูููุชุฏู"
echo "โ ุชู ุฅุตูุงุญ ูุดููุฉ ุฅูุดุงุก ุงููุฆุงุช"
echo "โ ุชู ุฅุตูุงุญ ูุดููุฉ ุงูุฅุนุฏุงุฏุงุช"
echo "โ ุชู ุฅุตูุงุญ ูุดููุฉ ุงูุฅุญุตุงุฆูุงุช ุงูุตูุฑูุฉ"
echo "โ ุชู ุฅุตูุงุญ ูุดููุฉ CSS ุงูููููุฏ"
echo "โ ุชู ุฅุตูุงุญ ูุดููุฉ ุงูุจูุช ูู ุงููุถุน ุงูุฏุงูู"
echo ""
echo "๐ ููููู ุงูุขู ุงููุตูู ุฅูู:"
echo "   - ููุญุฉ ุชุญูู ุงูููุชุฏู: http://localhost:3000/dashboard/forum"
echo "   - ุงูููุชุฏู ุงูุฑุฆูุณู: http://localhost:3000/forum"
echo "" 