# ุชูุฑูุฑ ุฅุตูุงุญ ุดุงูู ููุดุงูู API ูุงูุชุทุจูู

**ุงูุชุงุฑูุฎ**: 2025-01-04  
**ุงููุฏู**: ุญู ุฌููุน ุงููุดุงูู ุงูุชู ููุนุช ุงูุชุทุจูู ูู ุงูุนูู

## ุงููุดุงูู ุงูููุชุดูุฉ ูุงูุญููู

### 1. ุฎุทุฃ Dynamic Routes ุงููุชุถุงุฑุจุฉ
- **ุงููุดููุฉ**: `Error: You cannot use different slug names for the same dynamic path ('id' !== 'userId')`
- **ุงูุณุจุจ**: ูุฌูุฏ ูุฌูุฏ `app/api/user/[id]/[userId]` ูุญุชูู ุนูู ุงุณููู ูุฎุชูููู ููู dynamic segments
- **ุงูุญู**: ุญุฐู ุงููุฌูุฏ ุงููุชุถุงุฑุจ
- **ุงููุชูุฌุฉ**: โ ุงูุชุทุจูู ููููู ุงูุจุฏุก ุจูุฌุงุญ

### 2. ุฃุฎุทุงุก 404 ููููุงุช ุงูุชุทุจูู
- **ุงููุดููุฉ**: ูุดู ุชุญููู ูููุงุช ูุซู layout.js, page.js, main-app.js
- **ุงูุณุจุจ**: ุฎุทุฃ Dynamic Routes ููุน Next.js ูู ุงูุจูุงุก ุจุดูู ุตุญูุญ
- **ุงูุญู**: ุญู ูุดููุฉ Dynamic Routes
- **ุงููุชูุฌุฉ**: โ ุฌููุน ูููุงุช ุงูุชุทุจูู ุชูุญูู ุจูุฌุงุญ

### 3. ุฎุทุฃ 500 ูู API ุงูููุงูุงุช
- **ุงููุดููุฉ**: `Field author is required to return data, got null instead`
- **ุงูุณุจุจ**: ูุฌูุฏ ููุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุฏูู ูุคููุ ููู Prisma ูุชููุน author ุฏุงุฆูุงู
- **ุงูุญู**: 
  - ุงุณุชุฎุฏุงู `include` ุจุฏูุงู ูู `select` ุงููุนูุฏ
  - ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฃุฎุทุงุก ููุชุนุงูู ูุน ุงูููุงูุงุช ุจุฏูู ูุคูู
  - ุงุณุชุฎุฏุงู `(article as any).author` ููุชุนุงูู ูุน TypeScript
- **ุงููุชูุฌุฉ**: โ API ูุนูู ุจูุฌุงุญ ููุนูุฏ ุงูุจูุงูุงุช

### 4. ูุดููุฉ ุชุญููู ุงููููุงุช ุงูููุชุงุญูุฉ
- **ุงููุดููุฉ**: ุงููููุงุช ุงูููุชุงุญูุฉ ูุต ูููุณุช ูุตูููุฉ
- **ุงูุญู**: ุชุญููู ุงููุต ุงูููุตูู ุจููุงุตู ุฅูู ูุตูููุฉ
- **ุงูููุฏ**: 
  ```typescript
  seo_keywords: article.seoKeywords ? 
    article.seoKeywords.split(',').map((k: string) => k.trim()).filter(Boolean) : []
  ```
- **ุงููุชูุฌุฉ**: โ ุงููููุงุช ุงูููุชุงุญูุฉ ุชุธูุฑ ููุตูููุฉ

## ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
```typescript
try {
  articles = await prisma.article.findMany({
    // ... with author
  })
} catch (dbError) {
  console.error('ุฎุทุฃ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:', dbError)
  // ูุญุงููุฉ ุจุฏูู author
  articles = await prisma.article.findMany({
    // ... without author
  })
}
```

### 2. ุญูุงูุฉ ุงูุญููู ุงููุงุฑุบุฉ
```typescript
created_at: article.createdAt ? article.createdAt.toISOString() : null,
updated_at: article.updatedAt ? article.updatedAt.toISOString() : null,
published_at: article.publishedAt ? article.publishedAt.toISOString() : null,
```

### 3. ุชุญุณูู ุงูุฃุฏุงุก
- ุงุณุชุฎุฏุงู `include` ุจุฏูุงู ูู `select` ุงููุนูุฏ
- ุชูููู ุนุฏุฏ ุงูุญููู ุงููุทููุจุฉ
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุดูู ุฐูู

## ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ

### โ API ุงูููุงูุงุช
```bash
GET /api/articles?limit=2
# Response: 200 OK
{
  "success": true,
  "articles": [...],
  "pagination": {...}
}
```

### โ ุนุฑุถ ุงูููุงูุงุช
- ุงูููุงูุงุช ุชุธูุฑ ูู ุงููุงุฌูุฉ
- ุงููููุงุช ุงูููุชุงุญูุฉ ุชุธูุฑ ููุตูููุฉ
- ุงูููุงูุงุช ุจุฏูู ูุคูู ุชูุนุฑุถ ุจู author: null

### โ ุจููู ุตูู ุนุณูุฑ
- ูุธูุฑ ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- ูุนุฑุถ ุงูููุงูุงุช ุงููุฑุชุจุทุฉ ุจุงููููุงุช ุงูููุชุงุญูุฉ

## ุงููููุงุช ุงููุนุฏูุฉ

1. **app/api/articles/route.ts**
   - ุฅุตูุงุญ ุงุณุชุนูุงูุงุช Prisma
   - ูุนุงูุฌุฉ ุงูููุงูุงุช ุจุฏูู ูุคูู
   - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

2. **ุญุฐู app/api/user/[id]/[userId]**
   - ุญู ูุดููุฉ Dynamic Routes

3. **scripts/check-articles-authors.js**
   - ุณูุฑูุจุช ููุชุญูู ูู ุงูููุงูุงุช ุจุฏูู ูุคูู

## ุงูุชูุตูุงุช

1. **ุชุญุฏูุซ ุงูุจูุงูุงุช**: ุฅุถุงูุฉ ูุคูููู ููููุงูุงุช ุงูุชู ููุณ ููุง ูุคูู
2. **ุชุญุฏูุซ Schema**: ุฌุนู authorId ุงุฎุชูุงุฑู ุฅุฐุง ูุงู ูุทููุจุงู
3. **ูุฑุงูุจุฉ ุงูุฃุฏุงุก**: ูุชุงุจุนุฉ ุฃุฏุงุก API ูุน ุงูุจูุงูุงุช ุงููุจูุฑุฉ

## ุงูุฎูุงุตุฉ

ุชู ุญู ุฌููุน ุงููุดุงูู ุงูุฑุฆูุณูุฉ:
- โ ุงูุชุทุจูู ูุนูู ุจุฏูู ุฃุฎุทุงุก
- โ API ุงูููุงูุงุช ูุนูุฏ ุงูุจูุงูุงุช ุจูุฌุงุญ
- โ ุงููุงุฌูุฉ ุชุนุฑุถ ุงูููุงูุงุช ูุงููููุงุช ุงูููุชุงุญูุฉ
- โ ุจููู ุตูู ุนุณูุฑ ูุธูุฑ ุจุดูู ุตุญูุญ

ุงููุธุงู ุงูุขู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงููุงูู! ๐ 