# تقرير إصلاح أسماء المؤلفين في المقالات الموجودة

## التاريخ: ${new Date().toLocaleDateString('ar-SA')}

## المشكلة
- كانت هناك 4 مقالات منشورة تظهر باسم "كاتب غير معروف"
- لم تكن أسماء المراسلين تظهر في صفحات المقالات رغم وجودهم في النظام

## السبب الجذري
1. المقالات كانت تستخدم `authorId = 'default-author-id'`
2. لم يكن هناك `author_name` محفوظ في metadata
3. المراسلون كانوا موجودين في `team-members.json` ولكن ليس في جدول `users`

## الحل المطبق

### 1. إصلاح المقالات الموجودة
تم إنشاء سكريبت `scripts/fix-existing-articles-authors.js` الذي:
- بحث عن جميع المقالات بـ `authorId = 'default-author-id'`
- بحث عن المقالات بدون `author_name` في metadata
- قام بتحديث 4 مقالات وإسنادها للمراسل "علي عبده"

### المقالات التي تم إصلاحها:
1. "ولي العهد يوجه بتمديد فترة دراسة تنظيم العلاقة بين..."
2. "الجزيرة المفضلة للسعوديين في اليونان تفرض رسم دخول..."
3. "الهلال في مهمة صعبة أمام فلومينينسي البرازيلي في ر..."
4. "سيموني إنزاغي يعلن تشكيلة الهلال أمام فلومينينسي ا..."

### 2. مزامنة المراسلين إلى قاعدة البيانات
تم إنشاء سكريبت `scripts/sync-team-members-to-users.js` الذي:
- قرأ بيانات المراسلين من `team-members.json`
- أضاف 3 مراسلين جدد إلى جدول `users`:
  - علي عبده (writer)
  - أحمد محمد (editor)
  - فاطمة علي (user)

## النتيجة النهائية
- ✅ جميع المقالات الآن لديها `authorId` صحيح
- ✅ جميع المقالات لديها `author_name` في metadata
- ✅ المراسلون موجودون في جدول `users` في قاعدة البيانات
- ✅ أسماء المؤلفين تظهر بشكل صحيح في:
  - قائمة المقالات
  - صفحة تفاصيل المقال
  - بطاقات المقالات في الصفحة الرئيسية

## المستخدمون الحاليون في النظام
1. سارة المالكي (writer)
2. محمد العتيبي (writer)
3. أحمد الغامدي (writer)
4. مدير النظام (ADMIN)
5. النظام (ADMIN)
6. فاطمة علي (user)
7. أحمد محمد (editor)
8. علي عبده (writer)

## السكريبتات المضافة
1. `scripts/fix-existing-articles-authors.js` - لإصلاح المقالات الموجودة
2. `scripts/sync-team-members-to-users.js` - لمزامنة المراسلين إلى قاعدة البيانات

## توصيات
- يُنصح بتشغيل `sync-team-members-to-users.js` بشكل دوري عند إضافة مراسلين جدد
- للمقالات الجديدة، سيتم حفظ اسم المؤلف تلقائياً بفضل التحديثات السابقة على API 