# سياسة العمل مع Git والفرع

## 🎯 الهدف
هذا الدليل يوضح سياسة العمل مع الفروع وإدارة الأسرار في مشروع Sabq AI CMS.

## 📋 الفروع الحالية

### 1. **الفرع الرئيسي (main)**
- **الغرض**: النسخة المستقرة والجاهزة للإنتاج
- **الحالة الحالية**: يحتوي على بعض التغييرات القديمة والتعارضات
- **التوصية**: لا تستخدم للنشر حالياً

### 2. **الفرع النظيف (clean-main)**
- **الغرض**: النسخة المحدثة والآمنة
- **الحالة الحالية**: يحتوي على جميع الإصلاحات الأخيرة
- **التوصية**: استخدم هذا الفرع للتطوير والنشر

## 🔒 سياسة إدارة الأسرار

### ما هي الأسرار؟
- كلمات المرور
- مفاتيح API (OpenAI, Cloudinary, إلخ)
- عناوين قواعد البيانات
- أي بيانات حساسة أخرى

### قواعد الأمان
1. **لا تضع أبداً أسرار في الكود**
2. **لا ترفع ملفات .env إلى GitHub**
3. **استخدم متغيرات البيئة في منصات النشر**

### ملفات محمية في .gitignore
```
.env
.env.local
.env.production
*.env*
PRIVATE_ENV_VARS.txt
```

## 🚀 سياسة النشر

### للنشر على Vercel
1. استخدم فرع `clean-main`
2. أضف جميع المتغيرات البيئية في إعدادات Vercel
3. لا تضع أسرار في الكود

### للنشر على DigitalOcean
1. استخدم فرع `clean-main`
2. أضف جميع المتغيرات البيئية في إعدادات DigitalOcean
3. استخدم ملف `.do/app.yaml` للتكوين

## 🔄 سياسة الدمج

### متى ندمج؟
- بعد التأكد من حذف جميع الأسرار
- بعد حل جميع التعارضات
- بعد اختبار النسخة في بيئة التطوير

### كيفية الدمج الآمن
1. **مراجعة الكود**: تأكد من عدم وجود أسرار
2. **حل التعارضات**: معالجة جميع النزاعات
3. **اختبار شامل**: تأكد من عمل جميع الوظائف
4. **دمج تدريجي**: ابدأ بالملفات البسيطة

## 📝 إجراءات العمل اليومي

### للمطورين الجدد
1. انسخ الفرع `clean-main`
2. اعمل على فرع جديد للتطوير
3. لا تضع أسرار في الكود
4. ارفع التغييرات إلى `clean-main`

### للمطورين الحاليين
1. استخدم `clean-main` كأساس
2. اعمل على فروع منفصلة للميزات الجديدة
3. ادمج التغييرات في `clean-main` بعد الاختبار

## ⚠️ تحذيرات مهمة

### لا تفعل
- ❌ لا تضع أسرار في الكود
- ❌ لا ترفع ملفات .env
- ❌ لا تعمل مباشرة على main
- ❌ لا تدمج بدون مراجعة

### افعل
- ✅ استخدم متغيرات البيئة
- ✅ اعمل على فروع منفصلة
- ✅ اختبر قبل الدمج
- ✅ راجع الكود قبل الرفع

## 🛠️ أدوات مفيدة

### للتحقق من الأسرار
```bash
# البحث عن كلمات مفتاحية حساسة
grep -r "password\|secret\|key\|token" . --exclude-dir=node_modules
```

### لحالة Git
```bash
# عرض الفروع
git branch -a

# عرض الملفات المحمية
git status --ignored

# عرض التغييرات
git status
```

## 📞 الدعم

إذا واجهت أي مشكلة:
1. راجع هذا الدليل أولاً
2. تحقق من عدم وجود أسرار في الكود
3. تأكد من استخدام الفرع الصحيح
4. اطلب المساعدة من الفريق

## 🔄 التحديثات

هذا الدليل قابل للتحديث حسب احتياجات المشروع. تأكد من مراجعته دورياً.

---

**آخر تحديث**: يناير 2025
**الإصدار**: 1.0 