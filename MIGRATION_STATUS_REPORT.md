# ุชูุฑูุฑ ุญุงูุฉ ุชุฑุญูู ููุตุฉ "ุณุจู ุงูุฐููุฉ" ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุฑูุฒูุฉ

## ุงูุฅูุฌุงุฒุงุช ุงูููุชููุฉ โ

### 1. ุชุญุณูู ุฅุนุฏุงุฏุงุช Prisma ูุงูุฃุฏุงุก
- โ ุชุญุฏูุซ `lib/prisma.ts` ุจุฅุนุฏุงุฏุงุช Connection Pool ูุญุณููุฉ
- โ ุฅุถุงูุฉ middleware ูููุงุณ ุฃุฏุงุก ุงูุงุณุชุนูุงูุงุช ูู ุจูุฆุฉ ุงูุชุทููุฑ
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุฅุนุฏุงุฏุงุช ุงูุณุฌูุงุช

### 2. ุฅุนุฏุงุฏ ุทุจูุฉ ุงูุชุฎุฒูู ุงููุคูุช (Cache Layer)
- โ ุฅูุดุงุก `lib/cache.ts` ูุน ุฏุนู Upstash Redis
- โ ุชุซุจูุช ููุชุจุฉ `@upstash/redis`
- โ ุฅุนุฏุงุฏ ุฏูุงู ุงูุชุฎุฒูู ุงููุคูุช ูุน TTL ูุฎุตุต ููู ููุน ุจูุงูุงุช
- โ ุฅุถุงูุฉ ุฏุนู ูู cache invalidation patterns

### 3. ุชุตููู ุงูุฌุฏุงูู ุงูููููุฏุฉ
- โ ุฅูุดุงุก `prisma/schema-additions.prisma` ูุญุชูู ุนูู:
  - `team_members` - ุฃุนุถุงุก ุงููุฑูู
  - `email_verification_codes` - ุฑููุฒ ุงูุชุญูู
  - `password_reset_tokens` - ุฑููุฒ ุฅุนุงุฏุฉ ุงูุชุนููู
  - `templates` - ุงูููุงูุจ
  - `template_previews` - ูุนุงููุงุช ุงูููุงูุจ
  - `home_blocks_config` - ุฅุนุฏุงุฏุงุช ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
  - `smart_blocks` - ุงููุชู ุงูุฐููุฉ

### 4. ุฅูุดุงุก ูุธุงู ุงูุชุฑุญูู
- โ ุฅูุดุงุก `scripts/migrate-json-to-db.ts` - ุณูุฑูุจุช ุดุงูู ููุชุฑุญูู
- โ ุชุซุจูุช ููุชุจุฉ `uuid` ูููุนุฑูุงุช ุงููุฑูุฏุฉ
- โ ุฏุนู ุชุฑุญูู ุฌููุน ุฃููุงุน ุงูุจูุงูุงุช ูู JSON ุฅูู DB

### 5. ุชุญุฏูุซ ุทุจูุฉ ุชุฎุฒูู ุงูููุงูุงุช
- โ ุฅูุดุงุก `lib/articles-storage-prisma.ts` - ูุณุฎุฉ ูุญุฏุซุฉ ุชุณุชุฎุฏู Prisma
- โ ุฏูุฌ ุงูุชุฎุฒูู ุงููุคูุช ูุน ุฌููุน ุนูููุงุช ุงููุฑุงุกุฉ
- โ ุฅุถุงูุฉ ุฏูุงู ุจุญุซ ูููุชุฑุฉ ูุชูุฏูุฉ

## ุงูุฎุทูุงุช ุงููุชุจููุฉ ๐ง

### ุงููุฑุญูุฉ 1: ุฏูุฌ ุงูุชุญุฏูุซุงุช (1-2 ุฃูุงู)
1. **ุฏูุฌ schema-additions.prisma ูุน schema.prisma ุงูุฑุฆูุณู**
   ```bash
   # ุฏูุฌ ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ
   # ุชุดุบูู migration
   npx prisma migrate dev --name add_missing_tables
   ```

2. **ุชุญุฏูุซ DATABASE_URL ูู .env**
   ```
   DATABASE_URL="mysql://user:password@host:port/database?connection_limit=25&connect_timeout=10&pool_timeout=10&socket_timeout=10"
   ```

3. **ุฅุถุงูุฉ ุฅุนุฏุงุฏุงุช Redis/Upstash**
   ```
   UPSTASH_REDIS_REST_URL="your-upstash-url"
   UPSTASH_REDIS_REST_TOKEN="your-upstash-token"
   ```

### ุงููุฑุญูุฉ 2: ุชุฑุญูู ุงูุจูุงูุงุช (2-3 ุฃูุงู)
1. **ูุณุฎ ุงุญุชูุงุทู ูุงูู**
   ```bash
   # ูุณุฎ ุงุญุชูุงุทู ูุฌููุน ูููุงุช JSON
   cp -r data/ data_backup_$(date +%Y%m%d_%H%M%S)/
   ```

2. **ุชุดุบูู ุณูุฑูุจุช ุงูุชุฑุญูู**
   ```bash
   npx ts-node scripts/migrate-json-to-db.ts
   ```

3. **ุงูุชุญูู ูู ุณูุงูุฉ ุงูุจูุงูุงุช**
   - ููุงุฑูุฉ ุนุฏุฏ ุงูุณุฌูุงุช
   - ุงูุชุญูู ูู ุงูุนูุงูุงุช
   - ุงุฎุชุจุงุฑ ุนููุงุช ุนุดูุงุฆูุฉ

### ุงููุฑุญูุฉ 3: ุชุญุฏูุซ ุงูููุฏ (3-4 ุฃูุงู)

#### ุงููููุงุช ุงูุชู ุชุญุชุงุฌ ุชุญุฏูุซ ููุฑู:
1. **lib/articles-storage.ts**
   - ุงุณุชุจุฏุงู ุจู `lib/articles-storage-prisma.ts`

2. **lib/services/templateService.ts**
   ```typescript
   // ุงุณุชุจุฏุงู ูุฑุงุกุฉ JSON ุจู:
   const templates = await prisma.templates.findMany({
     where: { is_active: true }
   })
   ```

3. **app/api/dashboard/insights/behavior/route.ts**
   ```typescript
   // ุงุณุชุจุฏุงู ูุฑุงุกุฉ ุงููููุงุช ุจู:
   const [logs, users, articles, categories] = await Promise.all([
     prisma.activity_logs.findMany(),
     prisma.users.findMany(),
     prisma.articles.findMany(),
     prisma.categories.findMany()
   ])
   ```

4. **ุฌููุน ูููุงุช API Routes**
   - ุงูุจุญุซ ุนู `fs.readFile` ูุงุณุชุจุฏุงููุง ุจู Prisma queries
   - ุฅุถุงูุฉ ุงูุชุฎุฒูู ุงููุคูุช ูููุฑุงุกุงุช ุงููุชูุฑุฑุฉ

### ุงููุฑุญูุฉ 4: ุงูุงุฎุชุจุงุฑ ูุงูุชุญุณูู (2 ุฃูุงู)

1. **ุงุฎุชุจุงุฑ ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ**
   - ุชุณุฌูู ุงูุฏุฎูู ูุงููุตุงุฏูุฉ
   - ุนุฑุถ ุงูููุงูุงุช ูุงูุชุตูููุงุช
   - ุงูุชูุงุนูุงุช ูููุงุท ุงูููุงุก
   - ููุญุฉ ุงูุชุญูู ูุงูุชุญูููุงุช

2. **ููุงุณ ุงูุฃุฏุงุก**
   ```bash
   # ุงุณุชุฎุฏุงู Apache Bench ููุงุฎุชุจุงุฑ
   ab -n 1000 -c 10 https://your-domain.com/api/articles
   ```

3. **ุชุญุณูู ุงูุงุณุชุนูุงูุงุช ุงูุจุทูุฆุฉ**
   - ูุฑุงุฌุนุฉ ุณุฌูุงุช Prisma
   - ุฅุถุงูุฉ ููุงุฑุณ ุฅุถุงููุฉ
   - ุชุญุณูู ุงุณุชุฎุฏุงู include/select

### ุงููุฑุญูุฉ 5: ุงููุดุฑ ูุงููุฑุงูุจุฉ (1 ููู)

1. **ุฎุทุฉ ุงููุดุฑ ุงูุชุฏุฑูุฌู**
   - ูุดุฑ ุนูู ุจูุฆุฉ staging ุฃููุงู
   - ุงุฎุชุจุงุฑ ุดุงูู
   - ูุดุฑ ุนูู production ูุน ุฅููุงููุฉ ุงูุชุฑุงุฌุน

2. **ุฅุนุฏุงุฏ ุงููุฑุงูุจุฉ**
   - ูุฑุงูุจุฉ ุฃุฏุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ุชุชุจุน ูุนุฏู ุงูุฃุฎุทุงุก
   - ูุฑุงูุจุฉ ุงุณุชุฎุฏุงู Redis

## ุงููุฎุงุทุฑ ูุงูุชุญุฏูุงุช

### 1. ุญุฌู ุงูุจูุงูุงุช
- **ุงูุชุญุฏู**: ููู `user_article_interactions.json` ูุจูุฑ (152KB)
- **ุงูุญู**: ุชุฑุญูู ุนูู ุฏูุนุงุช ุจุงุณุชุฎุฏุงู batch processing

### 2. ุงูุชูุงูู ูุน ุงูููุฏ ุงููุฏูู
- **ุงูุชุญุฏู**: ุจุนุถ ุงูุฃููุงุฏ ุชุชููุน ุดูู ูุนูู ููุจูุงูุงุช
- **ุงูุญู**: ุงุณุชุฎุฏุงู transformation functions ูู ุทุจูุฉ ุงูุชุฎุฒูู

### 3. ุงูุฃุฏุงุก ุฃุซูุงุก ุงูุชุฑุญูู
- **ุงูุชุญุฏู**: ูุฏ ูุคุซุฑ ุงูุชุฑุญูู ุนูู ุฃุฏุงุก ุงููููุน
- **ุงูุญู**: ุชุดุบูู ุงูุชุฑุญูู ูู ุฃููุงุช ููููุฉ ุงูุฒูุงุฑุงุช

## ุงูุชูุตูุงุช

1. **ุงูุจุฏุก ุจุงูุจูุงูุงุช ุงูุฃูู ุญุณุงุณูุฉ** (ุงูุชุตูููุงุชุ ุงููููุงุช ุงูููุชุงุญูุฉ)
2. **ุงุฎุชุจุงุฑ ูู ูุฑุญูุฉ ุจุดูู ูููุตู** ูุจู ุงูุงูุชูุงู ููุชุงููุฉ
3. **ุงูุงุญุชูุงุธ ุจูุณุฎ ุงุญุชูุงุทูุฉ ูุชุนุฏุฏุฉ** ูู ุงูุจูุงูุงุช
4. **ุชูุซูู ุฃู ุชุบููุฑุงุช** ูู ุดูู ุงูุจูุงูุงุช ุฃู API
5. **ุฅุนุฏุงุฏ ุฎุทุฉ ุชุฑุงุฌุน ูุงุถุญุฉ** ูู ุญุงูุฉ ุญุฏูุซ ูุดุงูู

## ุงูุฎูุงุตุฉ

ุชู ุฅูุฌุงุฒ ุงูุฃุณุงุณูุงุช ุงููุทููุจุฉ ููุชุฑุญูู ูู JSON ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. ุงููุดุฑูุน ุฌุงูุฒ ููุจุฏุก ูู ูุฑุญูุฉ ุงูุชูููุฐ ุงููุนูู. ุงูููุช ุงูููุฏุฑ ูุฅููุงู ุฌููุน ุงููุฑุงุญู: **10-12 ููู ุนูู**.

### ุงูุฃููููุงุช ุงูููุฑูุฉ:
1. ุฏูุฌ schema ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ
2. ุชุดุบูู migration
3. ุงูุจุฏุก ุจุชุฑุญูู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
4. ุชุญุฏูุซ ุงููููุงุช ุงูุญุฑุฌุฉ ุฃููุงู 